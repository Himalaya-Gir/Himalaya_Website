---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import { t } from '../i18n/translations';
import '../styles/global.css';

const lang = 'en';

const phases = [
  {
    num: 1,
    color: 'bg-[#780000]',
    borderColor: 'border-[#780000]',
    slug: 'literature-review'
  },
  {
    num: 2,
    color: 'bg-[#003049]',
    borderColor: 'border-[#003049]',
    slug: 'experimental-design'
  },
  {
    num: 3,
    color: 'bg-[#780000]',
    borderColor: 'border-[#780000]',
    slug: 'trial-set-optimization'
  },
  {
    num: 4,
    color: 'bg-[#003049]',
    borderColor: 'border-[#003049]',
    slug: 'implementation'
  },
  {
    num: 5,
    color: 'bg-[#669bbc]',
    borderColor: 'border-[#669bbc]',
    slug: 'data-collection'
  },
];
---

<Layout title="Research Journey | Himalaya Girard">
  <Navigation lang={lang} currentPath="/journey" />

  <main class="min-h-screen bg-[#FFF9ED]">
    <!-- Hero Section -->
    <section class="py-20 px-6">
      <div class="max-w-5xl mx-auto text-center">
        <h1 class="font-figtree text-5xl md:text-6xl font-bold text-[#003049] mb-6">
          {t('process.title', lang)}
        </h1>
        <p class="font-figtree text-xl text-[#003049]/80 max-w-3xl mx-auto leading-relaxed">
          {t('process.subtitle', lang)}
        </p>
      </div>
    </section>

    <!-- Timeline - Desktop Horizontal -->
    <section class="hidden lg:block py-12 px-6">
      <div class="max-w-7xl mx-auto relative pb-12">
        <!-- Connecting line with gradient -->
        <div class="absolute top-16 left-24 right-24 h-0.5 bg-gradient-to-r from-[#780000] via-[#003049] to-[#669bbc]"></div>

        <!-- Timeline Items -->
        <div class="grid grid-cols-5 gap-4 relative">
          {phases.map((phase) => (
            <a
              href={`/journey/${phase.slug}`}
              class="timeline-phase group cursor-pointer flex flex-col items-center relative"
            >
              <!-- Progress indicator dot on line -->
              <div class={`absolute top-16 left-1/2 -translate-x-1/2 w-3 h-3 ${phase.color} rounded-full z-10 ring-4 ring-white`}></div>

              <!-- Circle with enhanced hover -->
              <div class={`w-32 h-32 ${phase.color} rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg transition-all duration-300 ease-out relative z-20 mb-8 hover:scale-150 hover:shadow-2xl hover:-translate-y-4 hover:z-30`}>
                {phase.num}
              </div>

              <!-- Content Card - minimalist -->
              <div class="text-center transition-all duration-300 group-hover:-translate-y-2">
                <div class="font-figtree text-xs font-semibold text-[#669bbc] mb-2 uppercase tracking-widest">
                  {t(`process.step${phase.num}.period`, lang)}
                </div>
                <h3 class={`font-figtree text-base font-bold mb-2 leading-tight transition-colors ${phase.num === 5 ? 'text-[#669bbc]' : 'text-[#003049] group-hover:text-[#780000]'}`}>
                  {t(`process.step${phase.num}.title`, lang)}
                </h3>

                <!-- Arrow hint on hover -->
                <div class={`font-figtree mt-3 text-xs font-semibold flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-all duration-300 ${phase.num === 5 ? 'text-[#669bbc]' : 'text-[#780000]'}`}>
                  <span>View details</span>
                  <svg class="w-3 h-3 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </div>
              </div>

            </a>
          ))}
        </div>
      </div>
    </section>

    <!-- Timeline - Mobile Vertical -->
    <section class="lg:hidden py-12 px-6">
      <div class="max-w-2xl mx-auto space-y-12">
        {phases.map((phase) => (
          <a
            href={`/journey/${phase.slug}`}
            class="block group"
          >
            <div class="relative pl-24">
              <!-- Circle -->
              <div class={`absolute left-0 top-0 w-16 h-16 ${phase.color} rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg`}>
                {phase.num}
              </div>

              <!-- Vertical line (except last) -->
              {phase.num < 5 && (
                <div class="absolute left-8 top-16 w-0.5 h-full bg-[#669bbc]/30"></div>
              )}

              <!-- Content Card -->
              <div class={`border-l-4 ${phase.borderColor} bg-[#FFF9ED] rounded-lg p-6 shadow-md group-hover:shadow-xl transition-all`}>
                <div class="font-figtree text-xs font-semibold text-[#669bbc] mb-2 uppercase tracking-wide">
                  {t(`process.step${phase.num}.period`, lang)}
                </div>
                <h3 class="font-figtree text-xl font-bold text-[#003049] mb-3">
                  {t(`process.step${phase.num}.title`, lang)}
                </h3>
                <p class="font-figtree text-sm text-[#003049]/80 leading-relaxed mb-4">
                  {t(`process.step${phase.num}.desc`, lang)}
                </p>

                <!-- Click to explore -->
                <div class="font-figtree text-sm font-semibold text-[#780000] flex items-center gap-1">
                  <span>Tap to explore this phase</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </div>
              </div>
            </div>
          </a>
        ))}
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="py-12 px-6 bg-[#003049] text-[#FFF9ED]">
    <div class="max-w-4xl mx-auto text-center">
      <p class="font-figtree text-lg mb-4 font-semibold">Himalaya Girard</p>
      <p class="font-figtree text-[#669bbc] mb-6">{t('footer.position', lang)}</p>
      <div class="flex justify-center gap-6">
        <a href="mailto:himalaya.girard@donders.ru.nl" class="font-figtree hover:text-[#780000] transition-colors">
          Email
        </a>
        <a href="https://www.linkedin.com/in/himalaya-girard" target="_blank" rel="noopener" class="font-figtree hover:text-[#780000] transition-colors">
          LinkedIn
        </a>
      </div>
      <p class="font-figtree text-sm text-[#669bbc]/70 mt-8">
        {t('footer.rights', lang)}
      </p>
    </div>
  </footer>
</Layout>

<style>
  .line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
