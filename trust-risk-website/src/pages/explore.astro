---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import '../styles/global.css';

const lang = 'en';
---

<Layout title="Explore Prospect Theory | Himalaya Girard">
	<Navigation lang={lang} currentPath="/explore" spacerBg="bg-[#003049]" />
	<main class="min-h-screen bg-[#003049]">
		<!-- Hero Section -->
		<section class="py-20 px-6 bg-[#003049]">
			<div class="max-w-5xl mx-auto text-center">
				<h1 class="font-figtree text-5xl md:text-6xl font-bold text-[#FFF9ED] mb-6 leading-tight">
					Explore Prospect Theory
				</h1>
				<p class="font-figtree text-xl text-[#FFF9ED]/85 leading-relaxed max-w-3xl mx-auto">
					Interact with the Nobel Prize-winning framework that explains how people make decisions under uncertainty.
					Adjust parameters in real-time and see how they shape behavior in trust and risk scenarios.
				</p>
			</div>
		</section>

		<!-- Introduction Section -->
		<section class="py-16 px-6 bg-[#FFF9ED]">
			<div class="max-w-4xl mx-auto">
				<h2 class="font-figtree text-3xl md:text-4xl font-bold text-[#003049] mb-6 text-center">
					How do people really make decisions when facing uncertainty?
				</h2>
				<p class="font-figtree text-lg text-[#003049]/80 mb-8 leading-relaxed text-center max-w-3xl mx-auto">
					In 1979, Kahneman and Tversky published Prospect Theory, showing that humans don't just calculate expected values. Instead, we follow consistent patterns:
				</p>

				<div class="grid md:grid-cols-3 gap-6 mt-10">
					<!-- Loss Aversion -->
					<div class="bg-[#780000] p-6 rounded-lg">
						<h3 class="font-figtree text-xl font-bold text-[#FFF9ED] mb-3">Loss Aversion</h3>
						<p class="font-figtree text-[#FFF9ED]/90 mb-3 leading-relaxed">
							We feel losses more intensely than equivalent gains
						</p>
						<p class="font-figtree text-sm text-[#FFF9ED]/70 italic">
							Losing $10 hurts more than finding $10 feels good
						</p>
					</div>

					<!-- Diminishing Sensitivity -->
					<div class="bg-[#003049] p-6 rounded-lg">
						<h3 class="font-figtree text-xl font-bold text-[#FFF9ED] mb-3">Diminishing Sensitivity</h3>
						<p class="font-figtree text-[#FFF9ED]/90 mb-3 leading-relaxed">
							The first dollar matters more than the next dollar
						</p>
						<p class="font-figtree text-sm text-[#FFF9ED]/70 italic">
							The jump from $0 to $100 feels bigger than from $900 to $1,000
						</p>
					</div>

					<!-- Probability Distortion -->
					<div class="bg-[#669bbc] p-6 rounded-lg">
						<h3 class="font-figtree text-xl font-bold text-[#FFF9ED] mb-3">Probability Distortion</h3>
						<p class="font-figtree text-[#FFF9ED]/90 mb-3 leading-relaxed">
							We overweight small probabilities and underweight large ones
						</p>
						<p class="font-figtree text-sm text-[#FFF9ED]/70 italic">
							A 1% chance feels more significant than reality; a 90% chance feels less certain
						</p>
					</div>
				</div>

				<p class="font-figtree text-lg text-[#003049]/80 mt-10 leading-relaxed text-center">
					This work earned Kahneman the Nobel Prize in 2002. Below, you can explore these principles and see how they apply to trust decisions.
				</p>
			</div>
		</section>

		<!-- Value Function Section -->
		<section class="py-16 px-6 bg-[#FFF9ED]">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#780000] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#003049] mb-4">Sensitivity to Outcomes</h2>
					<p class="font-figtree text-lg text-[#003049]/80 leading-relaxed">
						The value function shows how we perceive gains and losses. The key insight: <strong>losses loom larger than gains</strong> (loss aversion), and <strong>marginal value decreases</strong> as amounts grow.
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-8">
					<!-- Chart -->
					<div class="bg-[#FFF9ED] p-6 rounded-lg shadow-lg border-2 border-[#003049]/10 h-[500px] flex items-center">
						<canvas id="valueChart" class="w-full h-full"></canvas>
					</div>

					<!-- Controls -->
					<div class="space-y-6">
						<!-- Alpha (Curvature) -->
						<div class="bg-[#003049] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										Sensitivity to Amounts
									</label>
									<span class="font-figtree text-sm text-[#669bbc]">α (alpha) - curvature parameter</span>
								</div>
								<span id="alphaValue" class="font-figtree text-2xl font-bold text-[#669bbc]">0.88</span>
							</div>
							<input
								type="range"
								id="alphaSlider"
								min="0.1"
								max="1.5"
								step="0.01"
								value="0.88"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#780000]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mt-3 leading-relaxed">
								How much you care about the amount versus simply winning or losing. Lower values = the curve bends more (stronger diminishing sensitivity).
							</p>
						</div>

						<!-- Lambda (Loss Aversion) -->
						<div class="bg-[#780000] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										How Much Losses Hurt
									</label>
									<span class="font-figtree text-sm text-[#669bbc]">λ (lambda) - loss aversion coefficient</span>
								</div>
								<span id="lambdaValue" class="font-figtree text-2xl font-bold text-[#669bbc]">2.25</span>
							</div>
							<input
								type="range"
								id="lambdaSlider"
								min="1.0"
								max="4.0"
								step="0.05"
								value="2.25"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#003049]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mt-3 leading-relaxed">
								λ = 2.25 means a $10 loss feels like a $22.50 gain would feel good. Higher values = losses hurt more.
							</p>
						</div>

						<!-- Key Insights -->
						<div class="bg-[#669bbc] p-6 rounded-lg">
							<h3 class="font-figtree text-lg font-bold text-[#FFF9ED] mb-3">Key Insights</h3>
							<ul class="space-y-2 font-figtree text-[#FFF9ED]/90 text-sm">
								<li class="flex items-start gap-2">
									<span class="text-[#003049] mt-0.5">→</span>
									<span>The curve is steeper for losses than gains (asymmetry)</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#003049] mt-0.5">→</span>
									<span>Both sides show diminishing sensitivity (concave for gains, convex for losses)</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#003049] mt-0.5">→</span>
									<span>People are risk-averse for gains but risk-seeking for losses</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Probability Weighting Section -->
		<section class="py-16 px-6 bg-[#003049]">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#669bbc] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#FFF9ED] mb-4">How We Distort Probabilities</h2>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 leading-relaxed">
						We don't perceive probabilities linearly. Small chances feel bigger than they are, while medium and high probabilities feel less certain.
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-8">
					<!-- Chart -->
					<div class="bg-[#FFF9ED] p-6 rounded-lg shadow-lg border-2 border-[#003049]/10 h-[500px] flex items-center">
						<canvas id="weightChart" class="w-full h-full"></canvas>
					</div>

					<!-- Controls -->
					<div class="space-y-6">
						<!-- Gamma (Gains) -->
						<div class="bg-[#780000] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										Probability Distortion (Gains)
									</label>
									<span class="font-figtree text-sm text-[#669bbc]">γ⁺ (gamma) - weighting parameter</span>
								</div>
								<span id="gammaGainValue" class="font-figtree text-2xl font-bold text-[#669bbc]">0.61</span>
							</div>
							<input
								type="range"
								id="gammaGainSlider"
								min="0.3"
								max="1.0"
								step="0.01"
								value="0.61"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#669bbc]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mt-3 leading-relaxed">
								Lower values = more distortion. When γ is low, small probabilities loom larger and high probabilities feel less certain.
							</p>
						</div>

						<!-- Gamma (Losses) -->
						<div class="bg-[#669bbc] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										Probability Distortion (Losses)
									</label>
									<span class="font-figtree text-sm text-[#003049]">γ⁻ (gamma) - weighting parameter</span>
								</div>
								<span id="gammaLossValue" class="font-figtree text-2xl font-bold text-[#003049]">0.69</span>
							</div>
							<input
								type="range"
								id="gammaLossSlider"
								min="0.3"
								max="1.0"
								step="0.01"
								value="0.69"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#780000]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/90 mt-3 leading-relaxed">
								Same concept as gains, but for losses. Typically similar to γ⁺ but empirically slightly different.
							</p>
						</div>

						<!-- Key Insights -->
						<div class="bg-[#FFF9ED] p-6 rounded-lg">
							<h3 class="font-figtree text-lg font-bold text-[#003049] mb-3">Real-World Examples</h3>
							<ul class="space-y-2 font-figtree text-[#003049]/80 text-sm">
								<li class="flex items-start gap-2">
									<span class="text-[#780000] mt-0.5">→</span>
									<span>Lottery tickets: we overweight the tiny 0.00001% chance of winning millions</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#780000] mt-0.5">→</span>
									<span>Insurance: we overweight small disaster risks and pay premiums to avoid them</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#780000] mt-0.5">→</span>
									<span>The diagonal line shows perfect calibration (objective = subjective probability)</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Transition Section -->
		<section class="py-12 px-6 bg-[#FFF9ED]">
			<div class="max-w-4xl mx-auto">
				<div class="bg-[#003049] p-8 rounded-lg text-center">
					<h2 class="font-figtree text-3xl font-bold text-[#FFF9ED] mb-4">From Risk to Trust</h2>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 leading-relaxed">
						Prospect Theory explains how people handle random uncertainty: like coin flips or dice rolls. But what if we add a social component, when outcomes depend on another person's choice?
					</p>
				</div>
			</div>
		</section>

		<!-- Comparison Tool Section -->
		<section class="py-16 px-6 bg-[#FFF9ED]">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#780000] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#003049] mb-4">Applying Prospect Theory</h2>
					<p class="font-figtree text-lg text-[#003049]/80 leading-relaxed mb-4">
						Now, let's apply this framework to two scenarios: trusting a person versus taking a random gamble.
						<strong>Adjust the parameters for each scenario separately</strong> to see how the same situation can feel different depending on your preferences.
					</p>
					<div class="bg-[#003049] p-4 rounded-lg">
						<p class="font-figtree text-[#FFF9ED] mb-2">
							<strong class="text-[#669bbc]">How attractive is this option?</strong>
						</p>
						<p class="font-figtree text-sm text-[#FFF9ED]/80">
							The score combines all your preferences. <strong>Positive = you'd likely accept. Negative = you'd likely reject.</strong> Higher score = more attractive option.
						</p>
					</div>
				</div>

				<div class="grid md:grid-cols-2 gap-6">
					<!-- Trust Scenario -->
					<div class="bg-[#780000] p-8 rounded-lg">
						<div class="flex items-center gap-3 mb-6">
							<div class="w-12 h-12 bg-[#FFF9ED] rounded-lg flex items-center justify-center">
								<svg class="w-6 h-6 text-[#780000]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
								</svg>
							</div>
							<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED]">Trust Game</h3>
						</div>
						<p class="font-figtree text-[#FFF9ED]/90 mb-6 leading-relaxed">
							You can invest $10 with a stranger. Based on past behavior, they return the money <strong>60% of the time</strong>.
						</p>
						<div class="bg-[#FFF9ED]/10 p-4 rounded-lg mb-4">
							<div class="flex justify-between items-center mb-2">
								<span class="font-figtree text-[#FFF9ED]/70">Your investment:</span>
								<span class="font-figtree text-xl font-bold text-[#669bbc]">$<span id="trustInvest">10</span></span>
							</div>
							<div class="flex justify-between items-center mb-2">
								<span class="font-figtree text-[#FFF9ED]/70">If they reciprocate (60%):</span>
								<span class="font-figtree text-xl font-bold text-[#669bbc]">+$<span id="trustGain">30</span></span>
							</div>
							<div class="flex justify-between items-center">
								<span class="font-figtree text-[#FFF9ED]/70">If they defect (40%):</span>
								<span class="font-figtree text-xl font-bold text-[#669bbc]">-$<span id="trustLoss">10</span></span>
							</div>
						</div>
						
						<!-- Trust Parameters (Compact) -->
						<div class="space-y-2 mb-4">
							<p class="font-figtree text-xs text-[#FFF9ED] font-semibold mb-2">Adjust Trust Parameters:</p>
							<div class="bg-[#FFF9ED]/10 px-3 py-2 rounded">
								<div class="flex justify-between items-center mb-1">
									<span class="font-figtree text-xs text-[#FFF9ED]/70">α</span>
									<span id="trustAlphaVal" class="font-figtree text-xs font-bold text-[#669bbc]">0.88</span>
								</div>
								<input type="range" id="trustAlpha" min="0.1" max="1.5" step="0.01" value="0.88" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
							</div>
							<div class="bg-[#FFF9ED]/10 px-3 py-2 rounded">
								<div class="flex justify-between items-center mb-1">
									<span class="font-figtree text-xs text-[#FFF9ED]/70">λ</span>
									<span id="trustLambdaVal" class="font-figtree text-xs font-bold text-[#669bbc]">2.25</span>
								</div>
								<input type="range" id="trustLambda" min="1.0" max="4.0" step="0.05" value="2.25" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
							</div>
							<div class="grid grid-cols-2 gap-2">
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-xs text-[#FFF9ED]/70">γ⁺</span>
										<span id="trustGammaGVal" class="font-figtree text-xs font-bold text-[#669bbc]">0.61</span>
									</div>
									<input type="range" id="trustGammaG" min="0.3" max="1.0" step="0.01" value="0.61" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
								</div>
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-xs text-[#FFF9ED]/70">γ⁻</span>
										<span id="trustGammaLVal" class="font-figtree text-xs font-bold text-[#669bbc]">0.69</span>
									</div>
									<input type="range" id="trustGammaL" min="0.3" max="1.0" step="0.01" value="0.69" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
								</div>
							</div>
						</div>

						<div class="bg-[#669bbc] p-4 rounded-lg">
							<p class="font-figtree text-sm text-[#FFF9ED] mb-3">Prospect Theory Value:</p>
							<!-- Progress Bar -->
							<div class="w-full bg-[#FFF9ED]/30 rounded-full h-6 mb-2">
								<div id="trustBar" class="bg-[#FFF9ED] h-6 rounded-full transition-all duration-300 flex items-center justify-end pr-3" style="width: 50%">
									<span class="font-figtree text-sm font-bold text-[#780000]">2.4</span>
								</div>
							</div>
							<p class="font-figtree text-xs text-[#FFF9ED]/70 text-right" id="trustValue">+2.4</p>
						</div>
					</div>

					<!-- Risk Scenario -->
					<div class="bg-[#669bbc] p-8 rounded-lg">
						<div class="flex items-center gap-3 mb-6">
							<div class="w-12 h-12 bg-[#FFF9ED] rounded-lg flex items-center justify-center">
								<svg class="w-6 h-6 text-[#669bbc]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
								</svg>
							</div>
							<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED]">Risk Game</h3>
						</div>
						<p class="font-figtree text-[#FFF9ED]/90 mb-6 leading-relaxed">
							You can play a lottery with $10. A computer randomly generates outcomes with <strong>60% chance of winning</strong>.
						</p>
						<div class="bg-[#FFF9ED]/10 p-4 rounded-lg mb-4">
							<div class="flex justify-between items-center mb-2">
								<span class="font-figtree text-[#FFF9ED]/70">Your bet:</span>
								<span class="font-figtree text-xl font-bold text-[#003049]">$<span id="riskBet">10</span></span>
							</div>
							<div class="flex justify-between items-center mb-2">
								<span class="font-figtree text-[#FFF9ED]/70">If you win (60%):</span>
								<span class="font-figtree text-xl font-bold text-[#003049]">+$<span id="riskGain">30</span></span>
							</div>
							<div class="flex justify-between items-center">
								<span class="font-figtree text-[#FFF9ED]/70">If you lose (40%):</span>
								<span class="font-figtree text-xl font-bold text-[#003049]">-$<span id="riskLoss">10</span></span>
							</div>
						</div>
						
						<!-- Risk Parameters (Compact) -->
						<div class="space-y-2 mb-4">
							<p class="font-figtree text-xs text-[#FFF9ED] font-semibold mb-2">Adjust Risk Parameters:</p>
							<div class="bg-[#FFF9ED]/10 px-3 py-2 rounded">
								<div class="flex justify-between items-center mb-1">
									<span class="font-figtree text-xs text-[#FFF9ED]/70">α</span>
									<span id="riskAlphaVal" class="font-figtree text-xs font-bold text-[#003049]">0.88</span>
								</div>
								<input type="range" id="riskAlpha" min="0.1" max="1.5" step="0.01" value="0.88" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
							</div>
							<div class="bg-[#FFF9ED]/10 px-3 py-2 rounded">
								<div class="flex justify-between items-center mb-1">
									<span class="font-figtree text-xs text-[#FFF9ED]/70">λ</span>
									<span id="riskLambdaVal" class="font-figtree text-xs font-bold text-[#003049]">2.25</span>
								</div>
								<input type="range" id="riskLambda" min="1.0" max="4.0" step="0.05" value="2.25" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
							</div>
							<div class="grid grid-cols-2 gap-2">
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-xs text-[#FFF9ED]/70">γ⁺</span>
										<span id="riskGammaGVal" class="font-figtree text-xs font-bold text-[#003049]">0.61</span>
									</div>
									<input type="range" id="riskGammaG" min="0.3" max="1.0" step="0.01" value="0.61" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
								</div>
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-xs text-[#FFF9ED]/70">γ⁻</span>
										<span id="riskGammaLVal" class="font-figtree text-xs font-bold text-[#003049]">0.69</span>
									</div>
									<input type="range" id="riskGammaL" min="0.3" max="1.0" step="0.01" value="0.69" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
								</div>
							</div>
						</div>

						<div class="bg-[#003049] p-4 rounded-lg">
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mb-3">Prospect Theory Value:</p>
							<!-- Progress Bar -->
							<div class="w-full bg-[#FFF9ED]/30 rounded-full h-6 mb-2">
								<div id="riskBar" class="bg-[#669bbc] h-6 rounded-full transition-all duration-300 flex items-center justify-end pr-3" style="width: 50%">
									<span class="font-figtree text-sm font-bold text-[#FFF9ED]">2.4</span>
								</div>
							</div>
							<p class="font-figtree text-xs text-[#FFF9ED]/70 text-right" id="riskValue">+2.4</p>
						</div>
					</div>
				</div>

				<!-- Explanation -->
				<div class="mt-8 bg-[#003049] p-8 rounded-lg">
					<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED] mb-4">The Key Insight</h3>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 leading-relaxed mb-4">
						Notice that even though both scenarios have <strong>identical probabilities and outcomes</strong>,
						people often behave differently. Why?
					</p>
					<ul class="space-y-3 font-figtree text-[#FFF9ED]/80">
						<li class="flex items-start gap-3">
							<span class="text-[#669bbc] mt-1">→</span>
							<span><strong class="text-[#FFF9ED]">Social preferences:</strong> We care about fairness, reciprocity, and being betrayed by humans</span>
						</li>
						<li class="flex items-start gap-3">
							<span class="text-[#669bbc] mt-1">→</span>
							<span><strong class="text-[#FFF9ED]">Different risk attitudes:</strong> We may perceive human vs random uncertainty differently</span>
						</li>
						<li class="flex items-start gap-3">
							<span class="text-[#669bbc] mt-1">→</span>
							<span><strong class="text-[#FFF9ED]">This research:</strong> Tests if Prospect Theory alone can explain trust behavior when we carefully control for probability distributions</span>
						</li>
					</ul>
				</div>
			</div>
		</section>

		<!-- CTA Section -->
		<section class="py-16 px-6 bg-[#003049]">
			<div class="max-w-4xl mx-auto">
				<div class="bg-[#780000] p-8 rounded-lg">
					<h2 class="font-figtree text-3xl font-bold text-[#FFF9ED] mb-4 text-center">
						Want to Learn More?
					</h2>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 mb-6 leading-relaxed text-center">
						Explore the research journey to see how we designed experiments to test these predictions.
					</p>
					<div class="flex gap-4 justify-center flex-wrap">
						<a href={import.meta.env.BASE_URL + "journey"} class="font-figtree px-8 py-3 bg-[#FFF9ED] text-[#780000] rounded-lg hover:bg-[#FFF9ED]/90 transition-colors font-semibold">
							Research Journey
						</a>
						<a href={import.meta.env.BASE_URL + "references"} class="font-figtree px-8 py-3 border-2 border-[#FFF9ED] text-[#FFF9ED] rounded-lg hover:bg-[#FFF9ED] hover:text-[#780000] transition-colors font-semibold">
							Read the Literature
						</a>
					</div>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<footer class="py-10 px-6 bg-[#003049] text-[#FFF9ED]">
			<div class="max-w-4xl mx-auto text-center">
				<p class="font-figtree text-lg mb-3 font-semibold">Himalaya Girard</p>
				<p class="font-figtree text-[#669bbc] mb-5">Research Assistant in Cognitive Neuroscience</p>
				<div class="flex justify-center gap-6">
					<a href="mailto:himalaya.girard@donders.ru.nl" class="font-figtree hover:text-[#780000] transition-colors">
						Email
					</a>
					<a href="https://www.linkedin.com/in/himalaya-girard" target="_blank" rel="noopener" class="font-figtree hover:text-[#780000] transition-colors">
						LinkedIn
					</a>
				</div>
				<p class="font-figtree text-sm text-[#669bbc]/70 mt-6">
					© 2024 Himalaya Girard. All rights reserved.
				</p>
			</div>
		</footer>
	</main>
</Layout>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>
window.addEventListener('load', function() {
	// Wait for Chart.js to load
	if (typeof Chart === 'undefined') {
		console.error('Chart.js failed to load');
		return;
	}

	// Parameters for main charts (Value Function and Probability Weighting)
	let alpha = 0.88;
	let lambda = 2.25;
	let gammaGain = 0.61;
	let gammaLoss = 0.69;
	
	// Parameters for Trust and Risk scenarios (separate)
	let trustAlpha = 0.88;
	let trustLambda = 2.25;
	let trustGammaGain = 0.61;
	let trustGammaLoss = 0.69;
	
	let riskAlpha = 0.88;
	let riskLambda = 2.25;
	let riskGammaGain = 0.61;
	let riskGammaLoss = 0.69;

	// Value function: v(x) = x^α for gains, -λ * |x|^α for losses
	function valueFunction(x, a, l) {
		if (x >= 0) {
			return Math.pow(x, a);
		} else {
			return -l * Math.pow(Math.abs(x), a);
		}
	}

	// Probability weighting function: w(p) = p^γ / (p^γ + (1-p)^γ)^(1/γ)
	function weightFunction(p, g) {
		if (p === 0) return 0;
		if (p === 1) return 1;
		const numerator = Math.pow(p, g);
		const denominator = Math.pow(numerator + Math.pow(1 - p, g), 1 / g);
		return numerator / denominator;
	}

	// Generate data for value function chart
	function generateValueData(a, l) {
		const data = [];
		for (let x = -50; x <= 50; x += 0.5) {
			data.push({ x: x, y: valueFunction(x, a, l) });
		}
		return data;
	}

	// Generate data for weighting function chart
	function generateWeightData(g) {
		const data = [];
		for (let p = 0; p <= 1; p += 0.01) {
			data.push({ x: p, y: weightFunction(p, g) });
		}
		return data;
	}

	// Create value function chart
	const valueCtx = document.getElementById('valueChart');
	const valueChart = new Chart(valueCtx, {
		type: 'line',
		data: {
			datasets: [{
				label: 'Value Function',
				data: generateValueData(alpha, lambda),
				borderColor: '#780000',
				backgroundColor: 'rgba(120, 0, 0, 0.1)',
				borderWidth: 3,
				pointRadius: 0,
				tension: 0.4
			}]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			scales: {
				x: {
					type: 'linear',
					title: {
						display: true,
						text: 'Outcome (gains/losses)',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				},
				y: {
					title: {
						display: true,
						text: 'Subjective Value',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				}
			},
			plugins: {
				legend: { display: false },
				tooltip: {
					backgroundColor: '#003049',
					titleFont: { family: 'Figtree', size: 14 },
					bodyFont: { family: 'Figtree', size: 12 },
					callbacks: {
						label: function(context) {
							return `Value: ${context.parsed.y.toFixed(2)}`;
						}
					}
				}
			}
		}
	});

	// Create probability weighting chart
	const weightCtx = document.getElementById('weightChart');
	const weightChart = new Chart(weightCtx, {
		type: 'line',
		data: {
			datasets: [
				{
					label: 'Gains Weighting',
					data: generateWeightData(gammaGain),
					borderColor: '#780000',
					backgroundColor: 'rgba(120, 0, 0, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Losses Weighting',
					data: generateWeightData(gammaLoss),
					borderColor: '#669bbc',
					backgroundColor: 'rgba(102, 155, 188, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Perfect Rationality',
					data: [{ x: 0, y: 0 }, { x: 1, y: 1 }],
					borderColor: '#003049',
					borderWidth: 2,
					borderDash: [5, 5],
					pointRadius: 0
				}
			]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			scales: {
				x: {
					type: 'linear',
					min: 0,
					max: 1,
					title: {
						display: true,
						text: 'Objective Probability',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				},
				y: {
					min: 0,
					max: 1,
					title: {
						display: true,
						text: 'Decision Weight',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				}
			},
			plugins: {
				legend: {
					display: true,
					position: 'bottom',
					labels: {
						font: { family: 'Figtree', size: 12 },
						color: '#003049',
						usePointStyle: true,
						padding: 15
					}
				},
				tooltip: {
					backgroundColor: '#003049',
					titleFont: { family: 'Figtree', size: 14 },
					bodyFont: { family: 'Figtree', size: 12 }
				}
			}
		}
	});

	// Update value chart
	function updateValueChart() {
		valueChart.data.datasets[0].data = generateValueData(alpha, lambda);
		valueChart.update();
		updateComparison();
	}

	// Update weight chart
	function updateWeightChart() {
		weightChart.data.datasets[0].data = generateWeightData(gammaGain);
		weightChart.data.datasets[1].data = generateWeightData(gammaLoss);
		weightChart.update();
		updateComparison();
	}

	// Calculate prospect theory value for a gamble
	function calculateProspectValue(gain, loss, pGain, isGain, a, l, gGain, gLoss) {
		const vGain = valueFunction(gain, a, l);
		const vLoss = valueFunction(-loss, a, l);
		const wGain = weightFunction(pGain, isGain ? gGain : gLoss);
		const wLoss = weightFunction(1 - pGain, isGain ? gLoss : gGain);
		return wGain * vGain + wLoss * vLoss;
	}

	// Update comparison values
	function updateComparison() {
		const trustVal = calculateProspectValue(30, 10, 0.6, true, trustAlpha, trustLambda, trustGammaGain, trustGammaLoss);
		const riskVal = calculateProspectValue(30, 10, 0.6, true, riskAlpha, riskLambda, riskGammaGain, riskGammaLoss);

		// Update text values
		document.getElementById('trustValue').textContent = (trustVal >= 0 ? '+' : '') + trustVal.toFixed(2);
		document.getElementById('riskValue').textContent = (riskVal >= 0 ? '+' : '') + riskVal.toFixed(2);

		// Update progress bars
		// Scale: -10 to +10 maps to 0% to 100%
		const maxValue = 10;
		const minValue = -10;
		
		const trustPercent = Math.max(0, Math.min(100, ((trustVal - minValue) / (maxValue - minValue)) * 100));
		const riskPercent = Math.max(0, Math.min(100, ((riskVal - minValue) / (maxValue - minValue)) * 100));
		
		const trustBar = document.getElementById('trustBar');
		const riskBar = document.getElementById('riskBar');
		
		trustBar.style.width = trustPercent + '%';
		riskBar.style.width = riskPercent + '%';
		
		// Update number inside bar
		trustBar.querySelector('span').textContent = trustVal.toFixed(1);
		riskBar.querySelector('span').textContent = riskVal.toFixed(1);
	}

	// Alpha slider
	const alphaSlider = document.getElementById('alphaSlider');
	const alphaValue = document.getElementById('alphaValue');
	alphaSlider.addEventListener('input', (e) => {
		alpha = parseFloat(e.target.value);
		alphaValue.textContent = alpha.toFixed(2);
		updateValueChart();
	});

	// Lambda slider
	const lambdaSlider = document.getElementById('lambdaSlider');
	const lambdaValue = document.getElementById('lambdaValue');
	lambdaSlider.addEventListener('input', (e) => {
		lambda = parseFloat(e.target.value);
		lambdaValue.textContent = lambda.toFixed(2);
		updateValueChart();
	});

	// Gamma gain slider
	const gammaGainSlider = document.getElementById('gammaGainSlider');
	const gammaGainValue = document.getElementById('gammaGainValue');
	gammaGainSlider.addEventListener('input', (e) => {
		gammaGain = parseFloat(e.target.value);
		gammaGainValue.textContent = gammaGain.toFixed(2);
		updateWeightChart();
	});

	// Gamma loss slider
	const gammaLossSlider = document.getElementById('gammaLossSlider');
	const gammaLossValue = document.getElementById('gammaLossValue');
	gammaLossSlider.addEventListener('input', (e) => {
		gammaLoss = parseFloat(e.target.value);
		gammaLossValue.textContent = gammaLoss.toFixed(2);
		updateWeightChart();
	});

	// Trust scenario sliders
	document.getElementById('trustAlpha').addEventListener('input', (e) => {
		trustAlpha = parseFloat(e.target.value);
		document.getElementById('trustAlphaVal').textContent = trustAlpha.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustLambda').addEventListener('input', (e) => {
		trustLambda = parseFloat(e.target.value);
		document.getElementById('trustLambdaVal').textContent = trustLambda.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustGammaG').addEventListener('input', (e) => {
		trustGammaGain = parseFloat(e.target.value);
		document.getElementById('trustGammaGVal').textContent = trustGammaGain.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustGammaL').addEventListener('input', (e) => {
		trustGammaLoss = parseFloat(e.target.value);
		document.getElementById('trustGammaLVal').textContent = trustGammaLoss.toFixed(2);
		updateComparison();
	});

	// Risk scenario sliders
	document.getElementById('riskAlpha').addEventListener('input', (e) => {
		riskAlpha = parseFloat(e.target.value);
		document.getElementById('riskAlphaVal').textContent = riskAlpha.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskLambda').addEventListener('input', (e) => {
		riskLambda = parseFloat(e.target.value);
		document.getElementById('riskLambdaVal').textContent = riskLambda.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskGammaG').addEventListener('input', (e) => {
		riskGammaGain = parseFloat(e.target.value);
		document.getElementById('riskGammaGVal').textContent = riskGammaGain.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskGammaL').addEventListener('input', (e) => {
		riskGammaLoss = parseFloat(e.target.value);
		document.getElementById('riskGammaLVal').textContent = riskGammaLoss.toFixed(2);
		updateComparison();
	});

	// Initialize comparison
	updateComparison();
});
</script>
