---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import '../styles/global.css';

const lang = 'en';
---

<Layout title="Explore Prospect Theory | Himalaya Girard">
	<Navigation lang={lang} currentPath="/explore" spacerBg="bg-[#003049]" />
	<main class="min-h-screen bg-[#003049]">
		<!-- Hero Section -->
		<section class="py-20 px-6 bg-[#003049]">
			<div class="max-w-5xl mx-auto text-center">
				<h1 class="font-figtree text-5xl md:text-6xl font-bold text-[#FFF9ED] mb-6 leading-tight">
					Explore Prospect Theory
				</h1>
				<p class="font-figtree text-xl text-[#FFF9ED]/85 leading-relaxed max-w-3xl mx-auto">
					Interact with the Nobel Prize-winning framework that explains how people make decisions under uncertainty.
					Adjust parameters in real-time and see how they shape behavior.
				</p>
			</div>
		</section>

		<!-- Narrative Hook -->
		<section class="py-12 px-6 bg-[#780000]">
			<div class="max-w-4xl mx-auto">
				<h2 class="font-figtree text-3xl font-bold text-[#FFF9ED] mb-6 text-center">
					Your Brain Doesn't Calculate. It Distorts.
				</h2>
				<div class="space-y-4 text-[#FFF9ED]/90 font-figtree text-lg leading-relaxed">
					<p>
						In 1979, Kahneman and Tversky asked people to choose between bets. Simple gambles with clear odds. Then they reverse-engineered the "math" people's brains were using.
					</p>
					<p>
						Turns out we don't calculate expected value. We do something weirder. <strong>We distort probabilities. We feel losses more than gains. We follow patterns.</strong>
					</p>
					<p class="font-semibold text-[#FFF9ED]">
						This work won the Nobel Prize in 2002. Now I'm testing if the same math explains trust.
					</p>
				</div>
			</div>
		</section>

		<!-- Value Function Section -->
		<section class="py-16 px-6 bg-[#FFF9ED]">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#780000] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#003049] mb-4">1. Sensitivity to Outcomes</h2>
					<p class="font-figtree text-lg text-[#003049]/80 leading-relaxed">
						How we perceive gains and losses. <strong>Losses loom larger than gains</strong> (loss aversion), and <strong>marginal value decreases</strong> as amounts grow.
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-8">
					<!-- Chart -->
					<div class="bg-[#FFF9ED] p-6 rounded-lg shadow-lg border-2 border-[#003049]/10 h-[500px] flex items-center">
						<canvas id="valueChart" class="w-full h-full"></canvas>
					</div>

					<!-- Controls -->
					<div class="space-y-6">
						<!-- Alpha (Curvature) -->
						<div class="bg-[#003049] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										Sensitivity to Amounts
									</label>
									<span class="font-figtree text-sm text-[#669bbc]">α (alpha) - curvature parameter</span>
								</div>
								<span id="alphaValue" class="font-figtree text-2xl font-bold text-[#669bbc]">0.88</span>
							</div>
							<input
								type="range"
								id="alphaSlider"
								min="0.1"
								max="1.5"
								step="0.01"
								value="0.88"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#780000]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mt-3 leading-relaxed">
								How much you care about the amount versus simply winning or losing. Lower values = stronger diminishing sensitivity.
							</p>
						</div>

						<!-- Lambda (Loss Aversion) -->
						<div class="bg-[#780000] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										How Much Losses Hurt
									</label>
									<span class="font-figtree text-sm text-[#669bbc]">λ (lambda) - loss aversion coefficient</span>
								</div>
								<span id="lambdaValue" class="font-figtree text-2xl font-bold text-[#669bbc]">2.25</span>
							</div>
							<input
								type="range"
								id="lambdaSlider"
								min="1.0"
								max="4.0"
								step="0.05"
								value="2.25"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#003049]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mt-3 leading-relaxed">
								λ = 2.25 means a $10 loss feels like a $22.50 gain would feel good. Higher values = losses hurt more.
							</p>
						</div>

						<!-- Key Insights -->
						<div class="bg-[#669bbc] p-6 rounded-lg">
							<h3 class="font-figtree text-lg font-bold text-[#FFF9ED] mb-3">Key Insights</h3>
							<ul class="space-y-2 font-figtree text-[#FFF9ED]/90 text-sm">
								<li class="flex items-start gap-2">
									<span class="text-[#003049] mt-0.5">→</span>
									<span>The curve is steeper for losses than gains (asymmetry)</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#003049] mt-0.5">→</span>
									<span>Both sides show diminishing sensitivity</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#003049] mt-0.5">→</span>
									<span>People are risk-averse for gains but risk-seeking for losses</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Probability Weighting Section -->
		<section class="py-16 px-6 bg-[#003049]">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#669bbc] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#FFF9ED] mb-4">2. How We Distort Probabilities</h2>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 leading-relaxed">
						We don't perceive probabilities linearly. <strong>Small chances feel bigger</strong> than they are, while <strong>medium and high probabilities feel less certain.</strong>
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-8">
					<!-- Chart -->
					<div class="bg-[#FFF9ED] p-6 rounded-lg shadow-lg border-2 border-[#003049]/10 h-[500px] flex items-center">
						<canvas id="weightChart" class="w-full h-full"></canvas>
					</div>

					<!-- Controls -->
					<div class="space-y-6">
						<!-- Gamma (Gains) -->
						<div class="bg-[#780000] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										Probability Distortion (Gains)
									</label>
									<span class="font-figtree text-sm text-[#669bbc]">γ⁺ (gamma) - weighting parameter</span>
								</div>
								<span id="gammaGainValue" class="font-figtree text-2xl font-bold text-[#669bbc]">0.61</span>
							</div>
							<input
								type="range"
								id="gammaGainSlider"
								min="0.3"
								max="1.0"
								step="0.01"
								value="0.61"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#669bbc]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mt-3 leading-relaxed">
								Lower values = more distortion. Small probabilities loom larger; high probabilities feel less certain.
							</p>
						</div>

						<!-- Gamma (Losses) -->
						<div class="bg-[#669bbc] p-6 rounded-lg">
							<div class="flex justify-between items-center mb-4">
								<div>
									<label class="font-figtree text-lg font-semibold text-[#FFF9ED] block mb-1">
										Probability Distortion (Losses)
									</label>
									<span class="font-figtree text-sm text-[#003049]">γ⁻ (gamma) - weighting parameter</span>
								</div>
								<span id="gammaLossValue" class="font-figtree text-2xl font-bold text-[#003049]">0.69</span>
							</div>
							<input
								type="range"
								id="gammaLossSlider"
								min="0.3"
								max="1.0"
								step="0.01"
								value="0.69"
								class="w-full h-2 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#780000]"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/90 mt-3 leading-relaxed">
								Same concept as gains, but for losses. Typically similar to γ⁺ but empirically slightly different.
							</p>
						</div>

						<!-- Key Insights -->
						<div class="bg-[#FFF9ED] p-6 rounded-lg">
							<h3 class="font-figtree text-lg font-bold text-[#003049] mb-3">Real-World Examples</h3>
							<ul class="space-y-2 font-figtree text-[#003049]/80 text-sm">
								<li class="flex items-start gap-2">
									<span class="text-[#780000] mt-0.5">→</span>
									<span>Lottery tickets: we overweight the tiny chance of winning millions</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#780000] mt-0.5">→</span>
									<span>Insurance: we overweight small disaster risks</span>
								</li>
								<li class="flex items-start gap-2">
									<span class="text-[#780000] mt-0.5">→</span>
									<span>The diagonal line shows perfect calibration</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Transition Section -->
		<section class="py-12 px-6 bg-[#FFF9ED]">
			<div class="max-w-4xl mx-auto">
				<div class="bg-[#003049] p-8 rounded-lg text-center">
					<h2 class="font-figtree text-3xl font-bold text-[#FFF9ED] mb-4">From Risk to Trust</h2>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 leading-relaxed">
						Prospect Theory works for coin flips and dice. <strong>But what about trusting people?</strong>
					</p>
				</div>
			</div>
		</section>

		<!-- Comparison Tool Section -->
		<section class="py-16 px-6 bg-[#FFF9ED]">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#780000] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#003049] mb-4">3. Test It Yourself</h2>
					<p class="font-figtree text-lg text-[#003049]/80 leading-relaxed">
						Same bet. Different source. <strong>Adjust the sliders</strong> to see how your perception changes.
					</p>
				</div>

				<!-- Common Scenario Description -->
				<div class="bg-[#FFF9ED] border-4 border-[#003049] p-8 rounded-lg mb-6 relative">
					<!-- Left Arrow -->
					<button id="prevScenario" class="absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-[#003049] hover:bg-[#780000] text-[#FFF9ED] rounded-lg flex items-center justify-center transition-colors">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
						</svg>
					</button>

					<!-- Right Arrow -->
					<button id="nextScenario" class="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-[#003049] hover:bg-[#780000] text-[#FFF9ED] rounded-lg flex items-center justify-center transition-colors">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
						</svg>
					</button>

					<h3 class="font-figtree text-2xl font-bold text-[#003049] mb-6 text-center">The Scenario</h3>
					<div id="scenarioContent" class="bg-[#003049]/5 p-6 rounded-lg max-w-2xl mx-auto transition-all duration-500">
						<div class="flex justify-between items-center mb-3 pb-3 border-b border-[#003049]/20">
							<span class="font-figtree text-[#003049] font-semibold">Your investment:</span>
							<span id="scenarioInvestment" class="font-figtree text-2xl font-bold text-[#003049] transition-all duration-500">$10</span>
						</div>
						<div class="flex justify-between items-center mb-3">
							<span class="font-figtree text-[#003049] font-semibold">If you win <span id="scenarioWinProb" class="text-[#669bbc] transition-all duration-500">(60% chance)</span>:</span>
							<span id="scenarioWinAmount" class="font-figtree text-2xl font-bold text-[#669bbc] transition-all duration-500">+$30</span>
						</div>
						<div class="flex justify-between items-center">
							<span class="font-figtree text-[#003049] font-semibold">If you lose <span id="scenarioLoseProb" class="text-[#780000] transition-all duration-500">(40% chance)</span>:</span>
							<span id="scenarioLoseAmount" class="font-figtree text-2xl font-bold text-[#780000] transition-all duration-500">-$10</span>
						</div>
					</div>
					<p class="font-figtree text-sm text-[#003049]/70 text-center mt-6 italic">
						Same numbers. Different sources. Does it change your decision?
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-6">
					<!-- Trust Scenario -->
					<div class="bg-[#780000] p-8 rounded-lg">
						<div class="flex items-center gap-3 mb-6">
							<div class="w-12 h-12 bg-[#FFF9ED] rounded-lg flex items-center justify-center">
								<svg class="w-6 h-6 text-[#780000]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
								</svg>
							</div>
							<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED]">Trust Game</h3>
						</div>
						<p class="font-figtree text-[#FFF9ED]/90 mb-6 leading-relaxed">
							A stranger decides. They reciprocate <span id="trustProbText" class="font-bold">60%</span> of the time.
						</p>

						<!-- Trust Parameters (Compact) -->
						<div class="space-y-2 mb-4">
							<p class="font-figtree text-xs text-[#FFF9ED] font-semibold mb-2">Adjust Trust Parameters:</p>
							<div class="grid grid-cols-2 gap-2">
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Sensitivity to Amounts α</span>
										<span id="trustAlphaVal" class="font-figtree text-sm font-bold text-[#669bbc]">0.95</span>
									</div>
									<input type="range" id="trustAlpha" min="0.1" max="1.5" step="0.01" value="0.95" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
								</div>
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Loss Aversion λ</span>
										<span id="trustLambdaVal" class="font-figtree text-sm font-bold text-[#669bbc]">2.70</span>
									</div>
									<input type="range" id="trustLambda" min="0.1" max="4.0" step="0.01" value="2.70" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
								</div>
							</div>
							<div class="grid grid-cols-2 gap-2">
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Probability Distortion (Gains) γ⁺</span>
										<span id="trustGammaGVal" class="font-figtree text-sm font-bold text-[#669bbc]">2.01</span>
									</div>
									<input type="range" id="trustGammaG" min="0.3" max="3.0" step="0.01" value="2.01" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
								</div>
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Probability Distortion (Losses) δ⁻</span>
										<span id="trustGammaLVal" class="font-figtree text-sm font-bold text-[#669bbc]">0.51</span>
									</div>
									<input type="range" id="trustGammaL" min="0.3" max="1.0" step="0.01" value="0.51" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#669bbc]"/>
								</div>
							</div>
						</div>

						<div class="bg-[#669bbc] p-4 rounded-lg transition-transform duration-300">
							<p class="font-figtree text-sm text-[#FFF9ED] mb-1">Prospect Theory Value:</p>
							<p class="font-figtree text-xs text-[#FFF9ED]/70 mb-3 italic">Positive = Accept. Negative = Reject. Higher = More attractive.</p>
							<!-- Progress Bar -->
							<div class="w-full bg-[#FFF9ED]/30 rounded-full h-6 mb-2">
								<div id="trustBar" class="bg-[#FFF9ED] h-6 rounded-full transition-all duration-300 flex items-center justify-end pr-3" style="width: 50%">
									<span class="font-figtree text-sm font-bold text-[#780000]">2.4</span>
								</div>
							</div>
							<p class="font-figtree text-xs text-[#FFF9ED]/70 text-right" id="trustValue">+2.4</p>
							<div id="trustRecommendation" class="mt-3 text-center">
								<p class="font-figtree text-lg font-bold text-[#FFF9ED]">Yes, it is worth it to invest</p>
							</div>
						</div>
					</div>

					<!-- Risk Scenario -->
					<div class="bg-[#669bbc] p-8 rounded-lg">
						<div class="flex items-center gap-3 mb-6">
							<div class="w-12 h-12 bg-[#FFF9ED] rounded-lg flex items-center justify-center">
								<svg class="w-6 h-6 text-[#669bbc]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
								</svg>
							</div>
							<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED]">Risk Game</h3>
						</div>
						<p class="font-figtree text-[#FFF9ED]/90 mb-6 leading-relaxed">
							A computer decides. <span id="riskProbText" class="font-bold">60%</span> chance to win.
						</p>

						<!-- Risk Parameters (Compact) -->
						<div class="space-y-2 mb-4">
							<p class="font-figtree text-xs text-[#FFF9ED] font-semibold mb-2">Adjust Risk Parameters:</p>
							<div class="grid grid-cols-2 gap-2">
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Sensitivity to Amounts α</span>
										<span id="riskAlphaVal" class="font-figtree text-sm font-bold text-[#003049]">0.88</span>
									</div>
									<input type="range" id="riskAlpha" min="0.1" max="1.5" step="0.01" value="0.88" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
								</div>
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Loss Aversion λ</span>
										<span id="riskLambdaVal" class="font-figtree text-sm font-bold text-[#003049]">2.25</span>
									</div>
									<input type="range" id="riskLambda" min="1.0" max="4.0" step="0.05" value="2.25" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
								</div>
							</div>
							<div class="grid grid-cols-2 gap-2">
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Probability Distortion (Gains) γ⁺</span>
										<span id="riskGammaGVal" class="font-figtree text-sm font-bold text-[#003049]">0.61</span>
									</div>
									<input type="range" id="riskGammaG" min="0.3" max="1.0" step="0.01" value="0.61" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
								</div>
								<div class="bg-[#FFF9ED]/10 px-2 py-2 rounded">
									<div class="flex justify-between items-center mb-1">
										<span class="font-figtree text-sm text-[#FFF9ED]">Probability Distortion (Losses) δ⁻</span>
										<span id="riskGammaLVal" class="font-figtree text-sm font-bold text-[#003049]">0.69</span>
									</div>
									<input type="range" id="riskGammaL" min="0.3" max="1.0" step="0.01" value="0.69" class="w-full h-1 bg-[#FFF9ED]/20 rounded appearance-none cursor-pointer accent-[#003049]"/>
								</div>
							</div>
						</div>

						<div class="bg-[#003049] p-4 rounded-lg transition-transform duration-300">
							<p class="font-figtree text-sm text-[#FFF9ED] mb-1">Prospect Theory Value:</p>
							<p class="font-figtree text-xs text-[#FFF9ED]/70 mb-3 italic">Positive = Accept. Negative = Reject. Higher = More attractive.</p>
							<!-- Progress Bar -->
							<div class="w-full bg-[#FFF9ED]/30 rounded-full h-6 mb-2">
								<div id="riskBar" class="bg-[#669bbc] h-6 rounded-full transition-all duration-300 flex items-center justify-end pr-3" style="width: 50%">
									<span class="font-figtree text-sm font-bold text-[#FFF9ED]">2.4</span>
								</div>
							</div>
							<p class="font-figtree text-xs text-[#FFF9ED]/70 text-right" id="riskValue">+2.4</p>
							<div id="riskRecommendation" class="mt-3 text-center">
								<p class="font-figtree text-lg font-bold text-[#FFF9ED]">Yes, it is worth it to invest</p>
							</div>
						</div>
					</div>
				</div>

				<!-- Explanation -->
				<div class="mt-8 bg-[#003049] p-8 rounded-lg">
					<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED] mb-4">The Point</h3>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 leading-relaxed mb-4">
						Same bet. Different decision. Your parameters change how you see it.
					</p>
					<ul class="space-y-3 font-figtree text-[#FFF9ED]/80">
						<li class="flex items-start gap-3">
							<span class="text-[#669bbc] mt-1">→</span>
							<span><strong class="text-[#FFF9ED]">Parameters = perception.</strong> Same numbers, different feelings.</span>
						</li>
						<li class="flex items-start gap-3">
							<span class="text-[#669bbc] mt-1">→</span>
							<span><strong class="text-[#FFF9ED]">High loss aversion?</strong> Even good bets feel scary.</span>
						</li>
						<li class="flex items-start gap-3">
							<span class="text-[#669bbc] mt-1">→</span>
							<span><strong class="text-[#FFF9ED]">Distort probabilities?</strong> Changes everything.</span>
						</li>
						<li class="flex items-start gap-3">
							<span class="text-[#669bbc] mt-1">→</span>
							<span><strong class="text-[#FFF9ED]">My research:</strong> Do trust and risk use different parameters?</span>
						</li>
					</ul>
				</div>
			</div>
		</section>

		<!-- CTA Section -->
		<section class="py-16 px-6 bg-[#003049]">
			<div class="max-w-4xl mx-auto">
				<div class="bg-[#780000] p-8 rounded-lg">
					<h2 class="font-figtree text-3xl font-bold text-[#FFF9ED] mb-6 text-center">
						Think About It
					</h2>
					<div class="space-y-3 mb-8 text-center">
						<p class="font-figtree text-lg text-[#FFF9ED]/90 leading-relaxed">
							Will these parameters differ for Trust vs Risk?
						</p>
						<p class="font-figtree text-lg text-[#FFF9ED]/90 leading-relaxed">
							Is betrayal worse than bad luck?
						</p>
						<p class="font-figtree text-lg text-[#FFF9ED]/90 leading-relaxed">
							Do you weigh probabilities differently with people?
						</p>
					</div>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 mb-6 leading-relaxed text-center">
						See the hypotheses and how I got there.
					</p>
					<div class="flex gap-4 justify-center flex-wrap">
						<a href={import.meta.env.BASE_URL + "journey"} class="font-figtree px-8 py-3 bg-[#FFF9ED] text-[#780000] rounded-lg hover:bg-[#FFF9ED]/90 transition-colors font-semibold">
							Research Journey
						</a>
						<a href={import.meta.env.BASE_URL + "references"} class="font-figtree px-8 py-3 border-2 border-[#FFF9ED] text-[#FFF9ED] rounded-lg hover:bg-[#FFF9ED] hover:text-[#780000] transition-colors font-semibold">
							Read the Literature
						</a>
					</div>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<footer class="py-10 px-6 bg-[#003049] text-[#FFF9ED]">
			<div class="max-w-4xl mx-auto text-center">
				<p class="font-figtree text-lg mb-3 font-semibold">Himalaya Girard</p>
				<p class="font-figtree text-[#669bbc] mb-5">Research Assistant in Cognitive Neuroscience</p>
				<div class="flex justify-center gap-6">
					<a href="mailto:himalaya.girard@donders.ru.nl" class="font-figtree hover:text-[#780000] transition-colors">
						Email
					</a>
					<a href="https://www.linkedin.com/in/himalaya-girard" target="_blank" rel="noopener" class="font-figtree hover:text-[#780000] transition-colors">
						LinkedIn
					</a>
				</div>
				<p class="font-figtree text-sm text-[#669bbc]/70 mt-6">
					© 2025 Himalaya Girard. All rights reserved.
				</p>
			</div>
		</footer>
	</main>
</Layout>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>
window.addEventListener('load', function() {
	// Wait for Chart.js to load
	if (typeof Chart === 'undefined') {
		console.error('Chart.js failed to load');
		return;
	}

	// Parameters for main charts (Value Function and Probability Weighting)
	let alpha = 0.88;
	let lambda = 2.25;
	let gammaGain = 0.61;
	let gammaLoss = 0.69;

	// Parameters for Trust and Risk scenarios (separate)
	// Trust parameters (social context)
	let trustAlpha = 0.95;      // α_trust - increased sensitivity to outcomes in trust
	let trustLambda = 2.70;     // λ_trust - betrayal aversion
	let trustGammaGain = 2.01;  // γ_trust - probability weighting for gains (S-shaped)
	let trustGammaLoss = 0.51;  // δ_trust - probability weighting for losses

	// Risk parameters (non-social context)
	let riskAlpha = 0.88;       // α - sensitivity to outcomes
	let riskLambda = 2.25;      // λ - loss aversion
	let riskGammaGain = 0.61;   // γ - probability weighting for gains
	let riskGammaLoss = 0.69;   // δ - probability weighting for losses

	// Define multiple scenarios - mix of high and low probability scenarios
	const scenarios = [
		// High probability scenarios (Trust > Risk expected)
		{ investment: 10, winAmount: 30, loseAmount: 10, winProb: 0.6, loseProb: 0.4 },
		{ investment: 15, winAmount: 45, loseAmount: 15, winProb: 0.65, loseProb: 0.35 },
		{ investment: 20, winAmount: 50, loseAmount: 20, winProb: 0.7, loseProb: 0.3 },
		{ investment: 30, winAmount: 75, loseAmount: 30, winProb: 0.65, loseProb: 0.35 },
		{ investment: 18, winAmount: 55, loseAmount: 18, winProb: 0.62, loseProb: 0.38 },
		{ investment: 22, winAmount: 65, loseAmount: 22, winProb: 0.68, loseProb: 0.32 },
		{ investment: 16, winAmount: 48, loseAmount: 16, winProb: 0.63, loseProb: 0.37 },

		// Medium probability scenarios
		{ investment: 5, winAmount: 20, loseAmount: 5, winProb: 0.5, loseProb: 0.5 },
		{ investment: 25, winAmount: 60, loseAmount: 25, winProb: 0.55, loseProb: 0.45 },
		{ investment: 12, winAmount: 40, loseAmount: 12, winProb: 0.52, loseProb: 0.48 },

		// Low probability scenarios (Risk > Trust expected)
		{ investment: 15, winAmount: 60, loseAmount: 15, winProb: 0.35, loseProb: 0.65 },
		{ investment: 10, winAmount: 50, loseAmount: 10, winProb: 0.3, loseProb: 0.7 },
		{ investment: 20, winAmount: 80, loseAmount: 20, winProb: 0.4, loseProb: 0.6 },
		{ investment: 8, winAmount: 40, loseAmount: 8, winProb: 0.35, loseProb: 0.65 },
		{ investment: 12, winAmount: 55, loseAmount: 12, winProb: 0.38, loseProb: 0.62 }
	];

	let currentScenarioIndex = 0;

	// Value function: v(x) = x^α for gains, -λ * |x|^α for losses
	function valueFunction(x, a, l) {
		if (x >= 0) {
			return Math.pow(x, a);
		} else {
			return -l * Math.pow(Math.abs(x), a);
		}
	}

	// Probability weighting function: w(p) = p^γ / (p^γ + (1-p)^γ)^(1/γ)
	function weightFunction(p, g) {
		if (p === 0) return 0;
		if (p === 1) return 1;
		const numerator = Math.pow(p, g);
		const denominator = Math.pow(numerator + Math.pow(1 - p, g), 1 / g);
		return numerator / denominator;
	}

	// Generate data for value function chart
	function generateValueData(a, l) {
		const data = [];
		for (let x = -50; x <= 50; x += 0.5) {
			data.push({ x: x, y: valueFunction(x, a, l) });
		}
		return data;
	}

	// Generate data for weighting function chart
	function generateWeightData(g) {
		const data = [];
		for (let p = 0; p <= 1; p += 0.01) {
			data.push({ x: p, y: weightFunction(p, g) });
		}
		return data;
	}

	// Create value function chart
	const valueCtx = document.getElementById('valueChart');
	const valueChart = new Chart(valueCtx, {
		type: 'line',
		data: {
			datasets: [
				{
					label: 'Value Function',
					data: generateValueData(alpha, lambda),
					borderColor: '#780000',
					backgroundColor: 'rgba(120, 0, 0, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Perfect Rationality',
					data: [{ x: -50, y: -50 }, { x: 50, y: 50 }],
					borderColor: '#003049',
					borderWidth: 2,
					borderDash: [5, 5],
					pointRadius: 0
				}
			]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			scales: {
				x: {
					type: 'linear',
					title: {
						display: true,
						text: 'Outcome (gains/losses)',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				},
				y: {
					title: {
						display: true,
						text: 'Subjective Value',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				}
			},
			plugins: {
				legend: {
					display: true,
					position: 'bottom',
					labels: {
						font: { family: 'Figtree', size: 12 },
						color: '#003049',
						usePointStyle: true,
						padding: 15
					}
				},
				tooltip: {
					backgroundColor: '#003049',
					titleFont: { family: 'Figtree', size: 14 },
					bodyFont: { family: 'Figtree', size: 12 },
					callbacks: {
						label: function(context) {
							return `Value: ${context.parsed.y.toFixed(2)}`;
						}
					}
				}
			}
		}
	});

	// Create probability weighting chart
	const weightCtx = document.getElementById('weightChart');
	const weightChart = new Chart(weightCtx, {
		type: 'line',
		data: {
			datasets: [
				{
					label: 'Gains Weighting',
					data: generateWeightData(gammaGain),
					borderColor: '#780000',
					backgroundColor: 'rgba(120, 0, 0, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Losses Weighting',
					data: generateWeightData(gammaLoss),
					borderColor: '#669bbc',
					backgroundColor: 'rgba(102, 155, 188, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Perfect Rationality',
					data: [{ x: 0, y: 0 }, { x: 1, y: 1 }],
					borderColor: '#003049',
					borderWidth: 2,
					borderDash: [5, 5],
					pointRadius: 0
				}
			]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			scales: {
				x: {
					type: 'linear',
					min: 0,
					max: 1,
					title: {
						display: true,
						text: 'Objective Probability',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				},
				y: {
					min: 0,
					max: 1,
					title: {
						display: true,
						text: 'Decision Weight',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				}
			},
			plugins: {
				legend: {
					display: true,
					position: 'bottom',
					labels: {
						font: { family: 'Figtree', size: 12 },
						color: '#003049',
						usePointStyle: true,
						padding: 15
					}
				},
				tooltip: {
					backgroundColor: '#003049',
					titleFont: { family: 'Figtree', size: 14 },
					bodyFont: { family: 'Figtree', size: 12 }
				}
			}
		}
	});

	// Update value chart
	function updateValueChart() {
		valueChart.data.datasets[0].data = generateValueData(alpha, lambda);
		valueChart.update();
		updateComparison();
	}

	// Update weight chart
	function updateWeightChart() {
		weightChart.data.datasets[0].data = generateWeightData(gammaGain);
		weightChart.data.datasets[1].data = generateWeightData(gammaLoss);
		weightChart.update();
		updateComparison();
	}

	// Calculate prospect theory value for a gamble
	function calculateProspectValue(gain, loss, pGain, isGain, a, l, gGain, gLoss) {
		const vGain = valueFunction(gain, a, l);
		const vLoss = valueFunction(-loss, a, l);
		const wGain = weightFunction(pGain, isGain ? gGain : gLoss);
		const wLoss = weightFunction(1 - pGain, isGain ? gLoss : gGain);
		return wGain * vGain + wLoss * vLoss;
	}

	// Update scenario display with smooth animation
	function updateScenarioDisplay(direction = 'right') {
		const scenario = scenarios[currentScenarioIndex];
		const content = document.getElementById('scenarioContent');

		// Add fade-out and slide animation based on direction
		const slideDistance = direction === 'right' ? '20px' : '-20px';
		content.style.opacity = '0';
		content.style.transform = `translateX(${slideDistance}) scale(0.95)`;

		// Wait for animation, then update values
		setTimeout(() => {
			document.getElementById('scenarioInvestment').textContent = `$${scenario.investment}`;
			document.getElementById('scenarioWinAmount').textContent = `+$${scenario.winAmount}`;
			document.getElementById('scenarioLoseAmount').textContent = `-$${scenario.loseAmount}`;
			document.getElementById('scenarioWinProb').textContent = `(${(scenario.winProb * 100).toFixed(0)}% chance)`;
			document.getElementById('scenarioLoseProb').textContent = `(${(scenario.loseProb * 100).toFixed(0)}% chance)`;

			// Update probability in Trust and Risk cards
			const probPercent = (scenario.winProb * 100).toFixed(0);
			document.getElementById('trustProbText').textContent = `${probPercent}%`;
			document.getElementById('riskProbText').textContent = `${probPercent}%`;

			// Slide and fade back in from opposite direction
			const slideBackDistance = direction === 'right' ? '-20px' : '20px';
			content.style.transform = `translateX(${slideBackDistance}) scale(0.95)`;

			setTimeout(() => {
				content.style.opacity = '1';
				content.style.transform = 'translateX(0) scale(1)';
			}, 50);

			updateComparison(true);
		}, 200);
	}

	// Update comparison values
	function updateComparison(animate = false) {
		const scenario = scenarios[currentScenarioIndex];
		const trustVal = calculateProspectValue(scenario.winAmount, scenario.loseAmount, scenario.winProb, true, trustAlpha, trustLambda, trustGammaGain, trustGammaLoss);
		const riskVal = calculateProspectValue(scenario.winAmount, scenario.loseAmount, scenario.winProb, true, riskAlpha, riskLambda, riskGammaGain, riskGammaLoss);

		// Update text values
		document.getElementById('trustValue').textContent = (trustVal >= 0 ? '+' : '') + trustVal.toFixed(2);
		document.getElementById('riskValue').textContent = (riskVal >= 0 ? '+' : '') + riskVal.toFixed(2);

		// Update progress bars
		// Scale: -10 to +10 maps to 0% to 100%
		const maxValue = 10;
		const minValue = -10;

		const trustPercent = Math.max(0, Math.min(100, ((trustVal - minValue) / (maxValue - minValue)) * 100));
		const riskPercent = Math.max(0, Math.min(100, ((riskVal - minValue) / (maxValue - minValue)) * 100));

		const trustBar = document.getElementById('trustBar');
		const riskBar = document.getElementById('riskBar');

		// Add pulse animation if scenario changed
		if (animate) {
			const trustContainer = trustBar.parentElement.parentElement;
			const riskContainer = riskBar.parentElement.parentElement;

			trustContainer.style.transform = 'scale(1.05)';
			riskContainer.style.transform = 'scale(1.05)';

			setTimeout(() => {
				trustContainer.style.transform = 'scale(1)';
				riskContainer.style.transform = 'scale(1)';
			}, 300);
		}

		trustBar.style.width = trustPercent + '%';
		riskBar.style.width = riskPercent + '%';

		// Update number inside bar
		trustBar.querySelector('span').textContent = trustVal.toFixed(1);
		riskBar.querySelector('span').textContent = riskVal.toFixed(1);

		// Update recommendation messages
		const trustRecommendation = document.getElementById('trustRecommendation');
		const riskRecommendation = document.getElementById('riskRecommendation');

		if (trustVal >= 0) {
			trustRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#FFF9ED]">Yes, it is worth it to invest</p>';
		} else {
			trustRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#FFF9ED]">No, it is not worth it to invest</p>';
		}

		if (riskVal >= 0) {
			riskRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#FFF9ED]">Yes, it is worth it to invest</p>';
		} else {
			riskRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#FFF9ED]">No, it is not worth it to invest</p>';
		}
	}

	// Alpha slider
	const alphaSlider = document.getElementById('alphaSlider');
	const alphaValue = document.getElementById('alphaValue');
	alphaSlider.addEventListener('input', (e) => {
		alpha = parseFloat(e.target.value);
		alphaValue.textContent = alpha.toFixed(2);
		updateValueChart();
	});

	// Lambda slider
	const lambdaSlider = document.getElementById('lambdaSlider');
	const lambdaValue = document.getElementById('lambdaValue');
	lambdaSlider.addEventListener('input', (e) => {
		lambda = parseFloat(e.target.value);
		lambdaValue.textContent = lambda.toFixed(2);
		updateValueChart();
	});

	// Gamma gain slider
	const gammaGainSlider = document.getElementById('gammaGainSlider');
	const gammaGainValue = document.getElementById('gammaGainValue');
	gammaGainSlider.addEventListener('input', (e) => {
		gammaGain = parseFloat(e.target.value);
		gammaGainValue.textContent = gammaGain.toFixed(2);
		updateWeightChart();
	});

	// Gamma loss slider
	const gammaLossSlider = document.getElementById('gammaLossSlider');
	const gammaLossValue = document.getElementById('gammaLossValue');
	gammaLossSlider.addEventListener('input', (e) => {
		gammaLoss = parseFloat(e.target.value);
		gammaLossValue.textContent = gammaLoss.toFixed(2);
		updateWeightChart();
	});

	// Trust scenario sliders
	document.getElementById('trustAlpha').addEventListener('input', (e) => {
		trustAlpha = parseFloat(e.target.value);
		document.getElementById('trustAlphaVal').textContent = trustAlpha.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustLambda').addEventListener('input', (e) => {
		trustLambda = parseFloat(e.target.value);
		document.getElementById('trustLambdaVal').textContent = trustLambda.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustGammaG').addEventListener('input', (e) => {
		trustGammaGain = parseFloat(e.target.value);
		document.getElementById('trustGammaGVal').textContent = trustGammaGain.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustGammaL').addEventListener('input', (e) => {
		trustGammaLoss = parseFloat(e.target.value);
		document.getElementById('trustGammaLVal').textContent = trustGammaLoss.toFixed(2);
		updateComparison();
	});

	// Risk scenario sliders
	document.getElementById('riskAlpha').addEventListener('input', (e) => {
		riskAlpha = parseFloat(e.target.value);
		document.getElementById('riskAlphaVal').textContent = riskAlpha.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskLambda').addEventListener('input', (e) => {
		riskLambda = parseFloat(e.target.value);
		document.getElementById('riskLambdaVal').textContent = riskLambda.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskGammaG').addEventListener('input', (e) => {
		riskGammaGain = parseFloat(e.target.value);
		document.getElementById('riskGammaGVal').textContent = riskGammaGain.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskGammaL').addEventListener('input', (e) => {
		riskGammaLoss = parseFloat(e.target.value);
		document.getElementById('riskGammaLVal').textContent = riskGammaLoss.toFixed(2);
		updateComparison();
	});

	// Scenario navigation
	document.getElementById('prevScenario').addEventListener('click', () => {
		currentScenarioIndex = (currentScenarioIndex - 1 + scenarios.length) % scenarios.length;
		updateScenarioDisplay('left');
	});

	document.getElementById('nextScenario').addEventListener('click', () => {
		currentScenarioIndex = (currentScenarioIndex + 1) % scenarios.length;
		updateScenarioDisplay('right');
	});

	// Initialize comparison and scenario display
	updateScenarioDisplay();
	updateComparison();
});
</script>
